name: Update Solitude Theme

on:
  schedule:
    - cron: "0 0 * * 0"  # 每周日运行一次
  workflow_dispatch:  # 手动触发

jobs:
  update_theme:
    runs-on: ubuntu-latest
    steps:
      # Step 1: 检出你自己的仓库
      - name: Checkout Your Repository
        uses: actions/checkout@v3
        with:
          persist-credentials: false  # 禁用GITHUB_TOKEN凭证，以便可以使用git

      # Step 2: 克隆主题仓库
      - name: Clone Solitude Theme Repository
        run: |
          git clone --depth 1 https://github.com/everfu/hexo-theme-solitude.git solitude-theme

      # Step 3: 删除你仓库中的现有主题文件夹
      - name: Remove Existing Theme Files
        run: |
          rm -rf ./themes/solitude/*

      # Step 4: 复制新主题文件到目标文件夹
      - name: Copy New Theme Files
        run: |
          cp -r solitude-theme/* ./themes/solitude/

      # Step 5: 提交更新并推送到你的仓库
      - name: Commit and Push Changes
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add .
          git commit -m "Update solitude theme to latest version"
          git push origin ${{ github.ref }}
